<!--*******   NOVI DIZAJN (3.3.2023.g.)  *******-->

<div class="tab-navigation mt-3 ml-3">
  <ul class="nav nav-tabs nav-pills" role="tablist">
    <li class="nav-item">
      <a
        class="nav-link"
        [routerLinkActive]="['active']"
        [class.active]="selectedTab == 0"
        role="tab"
        (click)="setSelectedTab(0)"
      >
        <div
          [ngClass]="{
            'bottom-shadow-button': selectedTab != 0,
            'hide-bottom-box-shadow-project-settings': selectedTab == 0
          }"
        ></div>
        {{ "folders" | translate }}</a
      >
    </li>
    <li class="nav-item">
      <a
        class="nav-link"
        [routerLinkActive]="['active']"
        role="tab"
        [class.active]="selectedTab == 1"
        id=""
        (click)="setSelectedTab(1)"
        >{{ "comment" | translate }}
        <div
          [ngClass]="{
            'bottom-shadow-button': selectedTab != 1,
            'hide-bottom-box-shadow': selectedTab == 1
          }"
        ></div>
        <app-comment-counter
          *ngIf="commentNumber > 0"
          [top]="'-1'"
          [commentNumber]="commentNumber"
        ></app-comment-counter>
      </a>
    </li>
  </ul>
</div>

<ng-container *ngIf="inAnotherComponent">
  <div class="top-line"></div>
  <div class="in-component-scroll-wrapper" style="position: relative">
      <div *ngIf="isLoading" class="spinner-wrapper">
        <mat-spinner></mat-spinner>
      </div>
      <div>
        <div class="header-wrapper">
          <div class="ata-search mr-3" *ngIf="selectedTab === 0">
            <span class="search-icon">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="13"
                height="13.06"
                viewBox="0 0 13 13.06"
              >
                <path
                  id="Path_737"
                  data-name="Path 737"
                  d="M30.923,28.9l-.078-.079h0l-3.134-3.151a5.185,5.185,0,0,0-4.425-7.777h-.034a5.18,5.18,0,0,0-.032,10.36h.034a5.106,5.106,0,0,0,2.595-.706l3.131,3.149h0l.078.079a.6.6,0,0,0,.858,0l1.007-1.013A.612.612,0,0,0,30.923,28.9Zm-7.695-1.968a3.859,3.859,0,0,1,.024-7.718h.026a3.8,3.8,0,0,1,2.707,1.148,3.874,3.874,0,0,1-.027,5.449,3.8,3.8,0,0,1-2.7,1.121Z"
                  transform="translate(-18.101 -17.89)"
                  fill="#fcf4ec"
                />
              </svg>
            </span>
            <input
              type="text"
              #inputSearch
              (keyup)="filterView($event)"
              class="form-control mt-2 search-input"
              placeholder="{{ 'Search' | translate }}"
            />
            <span class="clear-icon" (click)="clearSearchText()">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="10.189"
                height="10.189"
                viewBox="0 0 10.189 10.189"
              >
                <path
                  id="Path_783"
                  data-name="Path 783"
                  d="M.589.708-3.622,4.925l.873.883L1.473,1.59,5.694,5.807l.873-.883L2.346.708,6.567-3.5l-.884-.872L1.473-.165-2.749-4.382l-.873.883Z"
                  transform="translate(3.622 4.382)"
                  fill="#fcf4ec"
                />
              </svg>
            </span>
          </div>
  
         <!--  *ngIf="
          userDetails.create_project_Attachment &&
          (directories.length > 0 && allowCreate())
        " -->
  
          <div
            class="header-btns-wrapper"
            *ngIf="
              userDetails.create_project_Attachment && 
              canEditFolder
            "
          >
            <div
              class="new-file-btn"
              (click)="onNewFile()"
              *ngIf="selectedTab === 0 && inFolder != '0'"
            >
              <div>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                  width="22.627"
                  height="22.627"
                  viewBox="0 0 22.627 22.627"
                >
                  <defs>
                    <clipPath id="clip-path">
                      <path
                        id="Path_736"
                        data-name="Path 736"
                        d="M0,9.951H16v-16H0Z"
                        transform="translate(0 6.049)"
                        fill="none"
                      />
                    </clipPath>
                  </defs>
                  <g
                    id="X_icon"
                    data-name="X icon"
                    transform="translate(11.314) rotate(45)"
                  >
                    <g
                      id="Group_291"
                      data-name="Group 291"
                      clip-path="url(#clip-path)"
                    >
                      <g
                        id="Group_289"
                        data-name="Group 289"
                        transform="translate(-0.001 0.002)"
                      >
                        <path
                          id="Path_734"
                          data-name="Path 734"
                          d="M9.951,4.975a8,8,0,1,1-8-8,8,8,0,0,1,8,8"
                          transform="translate(6.049 3.024)"
                          fill="#82a7e2"
                        />
                      </g>
                      <g
                        id="Group_290"
                        data-name="Group 290"
                        transform="translate(3.313 3.326)"
                      >
                        <path
                          id="Path_735"
                          data-name="Path 735"
                          d="M5.68,4.93,2.4,1.653l3.283-3.29a.63.63,0,0,0,.005-.923L5.455-2.8a.629.629,0,0,0-.947.053L1.255.505-2.059-2.8A.641.641,0,0,0-3-2.783l-.246.243a.641.641,0,0,0,.032.968L.062,1.7S-3.112,4.891-3.221,5a.63.63,0,0,0-.005.923l.235.235A.629.629,0,0,0-2.044,6.1L1.207,2.849,4.524,6.158a.642.642,0,0,0,.944-.016L5.714,5.9A.639.639,0,0,0,5.68,4.93"
                          transform="translate(3.453 2.997)"
                          fill="#373b40"
                        />
                      </g>
                    </g>
                  </g>
                </svg>
              </div>
              <div>{{ "new file" | translate | uppercase }}</div>
            </div>
            <div
              class="new-file-btn"
              (click)="onNewFolder()"
              *ngIf="selectedTab === 0"
            >
              <div>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                  width="22.627"
                  height="22.627"
                  viewBox="0 0 22.627 22.627"
                >
                  <defs>
                    <clipPath id="clip-path">
                      <path
                        id="Path_736"
                        data-name="Path 736"
                        d="M0,9.951H16v-16H0Z"
                        transform="translate(0 6.049)"
                        fill="none"
                      />
                    </clipPath>
                  </defs>
                  <g
                    id="X_icon"
                    data-name="X icon"
                    transform="translate(11.314) rotate(45)"
                  >
                    <g
                      id="Group_291"
                      data-name="Group 291"
                      clip-path="url(#clip-path)"
                    >
                      <g
                        id="Group_289"
                        data-name="Group 289"
                        transform="translate(-0.001 0.002)"
                      >
                        <path
                          id="Path_734"
                          data-name="Path 734"
                          d="M9.951,4.975a8,8,0,1,1-8-8,8,8,0,0,1,8,8"
                          transform="translate(6.049 3.024)"
                          fill="#82a7e2"
                        />
                      </g>
                      <g
                        id="Group_290"
                        data-name="Group 290"
                        transform="translate(3.313 3.326)"
                      >
                        <path
                          id="Path_735"
                          data-name="Path 735"
                          d="M5.68,4.93,2.4,1.653l3.283-3.29a.63.63,0,0,0,.005-.923L5.455-2.8a.629.629,0,0,0-.947.053L1.255.505-2.059-2.8A.641.641,0,0,0-3-2.783l-.246.243a.641.641,0,0,0,.032.968L.062,1.7S-3.112,4.891-3.221,5a.63.63,0,0,0-.005.923l.235.235A.629.629,0,0,0-2.044,6.1L1.207,2.849,4.524,6.158a.642.642,0,0,0,.944-.016L5.714,5.9A.639.639,0,0,0,5.68,4.93"
                          transform="translate(3.453 2.997)"
                          fill="#373b40"
                        />
                      </g>
                    </g>
                  </g>
                </svg>
              </div>
              <div>{{ "new folder" | translate | uppercase }}</div>
            </div>
          </div>
        </div>
  
        <div class="table-header" *ngIf="selectedTab === 0">
          <div class="table-header-item">
            {{ "name" | translate | titlecase }}
          </div>
          <div class="table-header-item">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink"
              width="17"
              height="14.953"
              viewBox="0 0 17 14.953"
            >
              <defs>
                <clipPath id="clip-path">
                  <rect
                    id="Rectangle_18004"
                    data-name="Rectangle 18004"
                    width="17"
                    height="14.953"
                    fill="none"
                  />
                </clipPath>
              </defs>
              <g
                id="Group_8587"
                data-name="Group 8587"
                transform="translate(-2 -1)"
              >
                <g
                  id="Mask_Group_8582"
                  data-name="Mask Group 8582"
                  transform="translate(2 1)"
                  clip-path="url(#clip-path)"
                >
                  <path
                    id="Path_5127"
                    data-name="Path 5127"
                    d="M13.488,11.522a.421.421,0,0,0,.355.146.407.407,0,0,0,.333-.138l4.406-4.473a.508.508,0,0,0,.144-.311.461.461,0,0,0-.183-.337l-.257-.244-.011-.009a.535.535,0,0,0-.29-.112.566.566,0,0,0-.405.24c-1.938,2.017-2.737,2.9-3.12,3.334.011-1.375.011-4.117.011-9.159A.439.439,0,0,0,14,0h-.343c-.285,0-.455.193-.455.515,0,4.888,0,7.763.022,9.117-.386-.415-1.18-1.264-3.276-3.451a.427.427,0,0,0-.333-.152.439.439,0,0,0-.278.133l-.3.264a.421.421,0,0,0-.151.305.43.43,0,0,0,.151.291Z"
                    transform="translate(-5.314 0)"
                    fill="#fcf4ec"
                  />
                  <path
                    id="Path_5128"
                    data-name="Path 5128"
                    d="M15.665,24.209v3.84H1.294v-3.84H0v5.216H17V24.209Z"
                    transform="translate(0 -14.473)"
                    fill="#fcf4ec"
                  />
                </g>
              </g>
            </svg>
          </div>
          <div class="table-header-item">
            {{ "description" | translate | titlecase }}
          </div>
          <div class="table-header-item">
            {{ "files" | translate | titlecase }}
          </div>
          <div class="table-header-item">
            {{ "size" | translate | titlecase }}
          </div>
          <div class="table-header-item">
            {{ "Uploaded" | translate | titlecase }}
          </div>
          <div class="table-header-item">
            {{ "competence" | translate | titlecase }}
          </div>
          <div class="table-header-item">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="10"
              height="14.612"
              viewBox="0 0 10 14.612"
            >
              <g
                id="Group_7857"
                data-name="Group 7857"
                transform="translate(0)"
              >
                <path
                  id="Path_800"
                  data-name="Path 800"
                  d="M31.964,16.408a.278.278,0,0,0-.26-.294h-2.7v-.7a.278.278,0,0,0-.26-.294H25.212a.278.278,0,0,0-.26.294v.7H22.233a.278.278,0,0,0-.26.294v.863h9.991Z"
                  transform="translate(-21.973 -15.119)"
                  fill="#fff"
                />
                <path
                  id="Path_801"
                  data-name="Path 801"
                  d="M21.973,23.209l1.222,11.4c.031.168.117.254.26.254h7.035c.144,0,.229-.086.26-.254l1.222-11.4Zm2.295,10.829-.846-8.58H24.55L25,34.038Zm3.25,0H26.332l-.167-8.58h1.5Zm2.063,0h-.735l.453-8.58h1.128Z"
                  transform="translate(-21.973 -20.256)"
                  fill="#fff"
                />
              </g>
            </svg>
          </div>
        </div>
        <div
          *ngIf="selectedTab === 0 && (listOfFolders$ | async)?.length > 0"
        >
          <app-tree-list [list]="listOfFolders$ | async"></app-tree-list>
        </div>
        <div *ngIf="selectedTab === 1">
          <app-comment-section
            content_type="{{ attachmentCategory }}"
            [parentId]="projectId"
          ></app-comment-section>
        </div>
      </div>
  </div>
</ng-container>

<ng-container *ngIf="!inAnotherComponent">
  <div class="scroll-wrapper" style="position: relative">
    <div class="skroll shadow-top-div" id="skrollbar">
      <div *ngIf="isLoading" class="spinner-wrapper">
        <mat-spinner></mat-spinner>
      </div>
      <div>
        <div class="header-wrapper">
          <div class="ata-search mr-3" *ngIf="selectedTab === 0">
            <span class="search-icon">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="13"
                height="13.06"
                viewBox="0 0 13 13.06"
              >
                <path
                  id="Path_737"
                  data-name="Path 737"
                  d="M30.923,28.9l-.078-.079h0l-3.134-3.151a5.185,5.185,0,0,0-4.425-7.777h-.034a5.18,5.18,0,0,0-.032,10.36h.034a5.106,5.106,0,0,0,2.595-.706l3.131,3.149h0l.078.079a.6.6,0,0,0,.858,0l1.007-1.013A.612.612,0,0,0,30.923,28.9Zm-7.695-1.968a3.859,3.859,0,0,1,.024-7.718h.026a3.8,3.8,0,0,1,2.707,1.148,3.874,3.874,0,0,1-.027,5.449,3.8,3.8,0,0,1-2.7,1.121Z"
                  transform="translate(-18.101 -17.89)"
                  fill="#fcf4ec"
                />
              </svg>
            </span>
            <input
              type="text"
              #inputSearch
              (keyup)="filterView($event)"
              class="form-control mt-2 search-input"
              placeholder="{{ 'Search' | translate }}"
            />
            <span class="clear-icon" (click)="clearSearchText()">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="10.189"
                height="10.189"
                viewBox="0 0 10.189 10.189"
              >
                <path
                  id="Path_783"
                  data-name="Path 783"
                  d="M.589.708-3.622,4.925l.873.883L1.473,1.59,5.694,5.807l.873-.883L2.346.708,6.567-3.5l-.884-.872L1.473-.165-2.749-4.382l-.873.883Z"
                  transform="translate(3.622 4.382)"
                  fill="#fcf4ec"
                />
              </svg>
            </span>
          </div>
  
         <!--  *ngIf="
          userDetails.create_project_Attachment &&
          (directories.length > 0 && allowCreate())
        " -->
  
          <div
            class="header-btns-wrapper"
            *ngIf="
              userDetails.create_project_Attachment && 
              canEditFolder
            "
          >
            <div
              class="new-file-btn"
              (click)="onNewFile()"
              *ngIf="selectedTab === 0 && inFolder != '0'"
            >
              <div>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                  width="22.627"
                  height="22.627"
                  viewBox="0 0 22.627 22.627"
                >
                  <defs>
                    <clipPath id="clip-path">
                      <path
                        id="Path_736"
                        data-name="Path 736"
                        d="M0,9.951H16v-16H0Z"
                        transform="translate(0 6.049)"
                        fill="none"
                      />
                    </clipPath>
                  </defs>
                  <g
                    id="X_icon"
                    data-name="X icon"
                    transform="translate(11.314) rotate(45)"
                  >
                    <g
                      id="Group_291"
                      data-name="Group 291"
                      clip-path="url(#clip-path)"
                    >
                      <g
                        id="Group_289"
                        data-name="Group 289"
                        transform="translate(-0.001 0.002)"
                      >
                        <path
                          id="Path_734"
                          data-name="Path 734"
                          d="M9.951,4.975a8,8,0,1,1-8-8,8,8,0,0,1,8,8"
                          transform="translate(6.049 3.024)"
                          fill="#82a7e2"
                        />
                      </g>
                      <g
                        id="Group_290"
                        data-name="Group 290"
                        transform="translate(3.313 3.326)"
                      >
                        <path
                          id="Path_735"
                          data-name="Path 735"
                          d="M5.68,4.93,2.4,1.653l3.283-3.29a.63.63,0,0,0,.005-.923L5.455-2.8a.629.629,0,0,0-.947.053L1.255.505-2.059-2.8A.641.641,0,0,0-3-2.783l-.246.243a.641.641,0,0,0,.032.968L.062,1.7S-3.112,4.891-3.221,5a.63.63,0,0,0-.005.923l.235.235A.629.629,0,0,0-2.044,6.1L1.207,2.849,4.524,6.158a.642.642,0,0,0,.944-.016L5.714,5.9A.639.639,0,0,0,5.68,4.93"
                          transform="translate(3.453 2.997)"
                          fill="#373b40"
                        />
                      </g>
                    </g>
                  </g>
                </svg>
              </div>
              <div>{{ "new file" | translate | uppercase }}</div>
            </div>
            <div
              class="new-file-btn"
              (click)="onNewFolder()"
              *ngIf="selectedTab === 0"
            >
              <div>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                  width="22.627"
                  height="22.627"
                  viewBox="0 0 22.627 22.627"
                >
                  <defs>
                    <clipPath id="clip-path">
                      <path
                        id="Path_736"
                        data-name="Path 736"
                        d="M0,9.951H16v-16H0Z"
                        transform="translate(0 6.049)"
                        fill="none"
                      />
                    </clipPath>
                  </defs>
                  <g
                    id="X_icon"
                    data-name="X icon"
                    transform="translate(11.314) rotate(45)"
                  >
                    <g
                      id="Group_291"
                      data-name="Group 291"
                      clip-path="url(#clip-path)"
                    >
                      <g
                        id="Group_289"
                        data-name="Group 289"
                        transform="translate(-0.001 0.002)"
                      >
                        <path
                          id="Path_734"
                          data-name="Path 734"
                          d="M9.951,4.975a8,8,0,1,1-8-8,8,8,0,0,1,8,8"
                          transform="translate(6.049 3.024)"
                          fill="#82a7e2"
                        />
                      </g>
                      <g
                        id="Group_290"
                        data-name="Group 290"
                        transform="translate(3.313 3.326)"
                      >
                        <path
                          id="Path_735"
                          data-name="Path 735"
                          d="M5.68,4.93,2.4,1.653l3.283-3.29a.63.63,0,0,0,.005-.923L5.455-2.8a.629.629,0,0,0-.947.053L1.255.505-2.059-2.8A.641.641,0,0,0-3-2.783l-.246.243a.641.641,0,0,0,.032.968L.062,1.7S-3.112,4.891-3.221,5a.63.63,0,0,0-.005.923l.235.235A.629.629,0,0,0-2.044,6.1L1.207,2.849,4.524,6.158a.642.642,0,0,0,.944-.016L5.714,5.9A.639.639,0,0,0,5.68,4.93"
                          transform="translate(3.453 2.997)"
                          fill="#373b40"
                        />
                      </g>
                    </g>
                  </g>
                </svg>
              </div>
              <div>{{ "new folder" | translate | uppercase }}</div>
            </div>
          </div>
        </div>
  
        <div class="table-header" *ngIf="selectedTab === 0">
          <div class="table-header-item">
            {{ "name" | translate | titlecase }}
          </div>
          <div class="table-header-item">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink"
              width="17"
              height="14.953"
              viewBox="0 0 17 14.953"
            >
              <defs>
                <clipPath id="clip-path">
                  <rect
                    id="Rectangle_18004"
                    data-name="Rectangle 18004"
                    width="17"
                    height="14.953"
                    fill="none"
                  />
                </clipPath>
              </defs>
              <g
                id="Group_8587"
                data-name="Group 8587"
                transform="translate(-2 -1)"
              >
                <g
                  id="Mask_Group_8582"
                  data-name="Mask Group 8582"
                  transform="translate(2 1)"
                  clip-path="url(#clip-path)"
                >
                  <path
                    id="Path_5127"
                    data-name="Path 5127"
                    d="M13.488,11.522a.421.421,0,0,0,.355.146.407.407,0,0,0,.333-.138l4.406-4.473a.508.508,0,0,0,.144-.311.461.461,0,0,0-.183-.337l-.257-.244-.011-.009a.535.535,0,0,0-.29-.112.566.566,0,0,0-.405.24c-1.938,2.017-2.737,2.9-3.12,3.334.011-1.375.011-4.117.011-9.159A.439.439,0,0,0,14,0h-.343c-.285,0-.455.193-.455.515,0,4.888,0,7.763.022,9.117-.386-.415-1.18-1.264-3.276-3.451a.427.427,0,0,0-.333-.152.439.439,0,0,0-.278.133l-.3.264a.421.421,0,0,0-.151.305.43.43,0,0,0,.151.291Z"
                    transform="translate(-5.314 0)"
                    fill="#fcf4ec"
                  />
                  <path
                    id="Path_5128"
                    data-name="Path 5128"
                    d="M15.665,24.209v3.84H1.294v-3.84H0v5.216H17V24.209Z"
                    transform="translate(0 -14.473)"
                    fill="#fcf4ec"
                  />
                </g>
              </g>
            </svg>
          </div>
          <div class="table-header-item">
            {{ "description" | translate | titlecase }}
          </div>
          <div class="table-header-item">
            {{ "files" | translate | titlecase }}
          </div>
          <div class="table-header-item">
            {{ "size" | translate | titlecase }}
          </div>
          <div class="table-header-item">
            {{ "Uploaded" | translate | titlecase }}
          </div>
          <div class="table-header-item">
            {{ "competence" | translate | titlecase }}
          </div>
          <div class="table-header-item">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="10"
              height="14.612"
              viewBox="0 0 10 14.612"
            >
              <g
                id="Group_7857"
                data-name="Group 7857"
                transform="translate(0)"
              >
                <path
                  id="Path_800"
                  data-name="Path 800"
                  d="M31.964,16.408a.278.278,0,0,0-.26-.294h-2.7v-.7a.278.278,0,0,0-.26-.294H25.212a.278.278,0,0,0-.26.294v.7H22.233a.278.278,0,0,0-.26.294v.863h9.991Z"
                  transform="translate(-21.973 -15.119)"
                  fill="#fff"
                />
                <path
                  id="Path_801"
                  data-name="Path 801"
                  d="M21.973,23.209l1.222,11.4c.031.168.117.254.26.254h7.035c.144,0,.229-.086.26-.254l1.222-11.4Zm2.295,10.829-.846-8.58H24.55L25,34.038Zm3.25,0H26.332l-.167-8.58h1.5Zm2.063,0h-.735l.453-8.58h1.128Z"
                  transform="translate(-21.973 -20.256)"
                  fill="#fff"
                />
              </g>
            </svg>
          </div>
        </div>
        <div
          *ngIf="selectedTab === 0 && (listOfFolders$ | async)?.length > 0"
        >
          <app-tree-list [list]="listOfFolders$ | async"></app-tree-list>
        </div>
        <div *ngIf="selectedTab === 1">
          <app-comment-section
            content_type="{{ attachmentCategory }}"
            [parentId]="projectId"
          ></app-comment-section>
        </div>
      </div>
    </div>
    <div class="thin-red-line-bottom"></div>
      <div class="thin-red-line-right"></div>
  </div>
</ng-container>


<div class="spinner-wrapper" *ngIf="loadingSpinnerService.isLoading$ | async">
  <mat-spinner></mat-spinner>
</div>
