<div class="new-bill-wrapp">
  <div class="form-heading">
    <div class="navbar-collapse custom-800" id="navbarSupportedContent">
      <div class="back-button-and-invoices-name cursor-pointer">
        <a
          [routerLink]="['/invoices']"
          class="home"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{ exact: true }"
        >
          <svg
            xmlns:xlink="http://www.w3.org/1999/xlink"
            height="29.342"
            viewBox="0 0 34.604 29.342"
            width="34.604"
            xmlns="http://www.w3.org/2000/svg"
          >
            <defs>
              <clipPath id="clip-path">
                <rect
                  data-name="Rectangle 15829"
                  fill="none"
                  height="29.342"
                  id="Rectangle_15829"
                  width="34.604"
                ></rect>
              </clipPath>
            </defs>
            <g
              data-name="Group 4372"
              id="Group_4372"
              transform="translate(0 0)"
            >
              <g
                clip-path="url(#clip-path)"
                data-name="Group 4371"
                id="Group_4371"
                transform="translate(0 0)"
              >
                <path
                  d="M33.735,13.5c-14.991,0-24.041,0-28.226.069L3.632,13.6,5,12.316C6.115,11.264,8.731,8.8,15.68,2.068a.625.625,0,0,0,.251-.519c0-.111-.124-.262-.244-.408l-.8-.914C14.716.061,14.615,0,14.483,0c-.044,0-.182.055-.386.259L.293,14.052v0A1.009,1.009,0,0,0,.3,15.481L13.987,29.1a1.016,1.016,0,0,0,.451.238c.153,0,.244-.072.528-.358l.742-.79a.963.963,0,0,0,.177-.445c0-.2-.153-.423-.5-.725-4.779-4.64-8.245-7.92-10.33-9.771L3.613,15.969l1.935.015c4.256.034,12.819.034,28.364.034a.656.656,0,0,0,.691-.743V14.2c0-.209,0-.7-.868-.7"
                  data-name="Path 1822"
                  fill="#82a7e2"
                  id="Path_1822"
                  transform="translate(0 0)"
                ></path>
              </g>
            </g>
          </svg>
        </a>
        <div class="head-name">
          {{ "New Invoice" | translate }}
        </div>
      </div>
    </div>
  </div>

  <div class="blu-scroll-wrapp">
    <div class="blu-scroll">
      <div class="invoice-top-header">
        <div class="invoice-top-position">
          <div class="hf-20">
            <div>{{ "Invoices" | translate }} :</div>
            <div>_ _ _ _</div>
          </div>
          <div class="hf-20">
            <div>{{ "Faktura Nr" | translate }} :</div>
            <div>_ _ _ _</div>
          </div>
        </div>
      </div>
      <div class="invoice-form-wrapp">
        <form action="" [formGroup]="createForm" (ngSubmit)="createInvoice()" onkeydown="return event.key != 'Enter';">
          <div class="invoice-form-border">
            <div class="first-wrapp">
              <div class="form-selects-wrapper">
                <div class="form-select-position w-270">
                  <div class="form-select-wrapper">
                    <label for="">
                      {{ "Project" | translate }}
                    </label>
                    <div class="select-wrapp">
                      <app-select-dropdown-invoice
                        (emitedSelectedProject)="emitedSelectedProject($event)"
                        [projects]="projects"
                        [disableSelect]="false"
                      >
                      </app-select-dropdown-invoice>
                    </div>
                  </div>
                  <div class="form-select-wrapper">
                    <label for="">
                      {{ "Our Reference" | translate }}
                    </label>
                    <div class="select-wrapp">
                      <app-select-dropdown-reference
                        (emitedSelectedReference)="
                          emitedSelectedReference($event)
                        "
                        [references]="referencesOfProject"
                      >
                        <!--Select our reference-->
                      </app-select-dropdown-reference>
                    </div>
                  </div>
                </div>
                <div class="form-select-position w-270">
                  <div class="form-select-wrapper">
                    <label for="">
                      {{ "Client" | translate }}
                    </label>
                    <div class="select-wrapp">
                      <input
                        type="text"
                        readonly
                        value="{{ projectClientName }}"
                        class="readonly-inputs"
                      />
                    </div>
                  </div>
                  <div class="form-select-wrapper">
                    <label for="">
                      {{ "Kundens referens" | translate }}
                    </label>
                    <div class="select-wrapp">
                      <input
                        type="text"
                        readonly
                        class="readonly-inputs"
                        formControlName="invoice_reference"
                      />
                    </div>
                  </div>
                </div>
                <div class="form-select-position w-148">
                  <div class="form-select-wrapper">
                    <label for="">
                      {{ "Category" | translate }}
                    </label>
                    <div class="select-wrapp">
                      <app-new-bill-category-dropdown
                        (emitSelectedCategory)="selectedCategory($event)"
                      >
                      </app-new-bill-category-dropdown>
                    </div>
                  </div>
                  <div class="form-select-wrapper">
                    <label for="">
                      {{ "Betalningsvillkor" | translate }}
                    </label>
                    <div class="select-wrapp">
                      <app-payment-terms-dropdown
                        (emitSelectedMaturity)="selectedMaturityDays($event)"
                        [isDateSelected]="isInvoiceDateSelected"
                        [selected]="needToWriteOnPaymentTerms"
                      >
                      </app-payment-terms-dropdown>
                    </div>
                  </div>
                </div>
                <div class="form-select-position w-200">
                  <div class="form-select-wrapper">
                    <label for="">
                      {{ "TSC_INVOICE_DATE" | translate }}
                    </label>
                    <div class="select-wrapp">
                      <input
                        (keydown)="$event.preventDefault()"
                        id="dateSelectInvoiceDate"
                        autocomplete="off"
                        type="text"
                        style="width: 100%"
                        class="form-control project-date"
                        formControlName="invoiceDate"
                        aria-describedby="basic-addon1"
                        placeholder="{{ 'Choose Invoice Date' | translate }}"
                        #InvoiceDate
                        name="InvoiceDate"
                      />
                    </div>
                  </div>
                  <div class="form-select-wrapper">
                    <label for="">
                      {{ "Förfallodag" | translate }}
                    </label>
                    <div class="select-wrapp">
                      <input
                        (keydown)="$event.preventDefault()"
                        id="dateSelectMaturityDate"
                        autocomplete="off"
                        type="text"
                        style="width: 100%"
                        readonly
                        class="form-control project-date"
                        formControlName="maturityDate"
                        aria-describedby="basic-addon1"
                        placeholder="{{ 'Choose Maturity Date' | translate }}"
                        #InvoiceDate
                        name="MaturityDate"
                      />
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="text-form-border">
            <div class="second-wrapp">
              <div class="comment-wrapp">
                <div class="text-area-w">
                  <label for="">
                    {{ "Inter kommentar" | translate }}
                  </label>
                  <div style="display: flex">
                    <textarea
                      name=""
                      id="comment1"
                      #comment1
                      [maxlength]="150"
                      formControlName="comment1"
                      (keyup)="autogrow('comment1')"
                    >
                    </textarea>
                  </div>
                  <div class="char-count">{{ comment1.value.length }}/150</div>
                </div>
                <div class="text-area-w">
                  <label for="">
                    {{ "Fakturatext" | translate }}
                  </label>
                  <div style="display: flex">
                    <textarea
                      name=""
                      id="comment2"
                      #comment2
                      [maxlength]="150"
                      formControlName="comment2"
                      (keyup)="autogrow('comment2')"
                    ></textarea>
                  </div>
                  <div class="char-count">{{ comment2.value.length }}/150</div>
                </div>
              </div>
            </div>
          </div>
          <div class="checked-border">
            <div class="checked-wrapp">
              <div>
                <div>
                  <label for="">{{ "Projektnamn" | translate }}</label>
                  <div class="flexbox">
                    <div class="input-wrapp">
                      <input
                        type="text"
                        readonly
                        class="readonly-inputs"
                        formControlName="clientsProjectName"
                      />
                    </div>
                    <div class="checkbox-wrapp">
                      <input
                        type="checkbox"
                        class="checkbox-type"
                        #checkedProjectName
                        (click)="
                          showDataInTable(
                            checkedProjecName,
                            'clientsProjectName'
                          )
                        "
                        [disabled]="
                          createForm.value.clientsProjectName?.length < 1
                        "
                      />
                      <app-checkout-svg
                        *ngIf="!checkedProjecName"
                        [width]="26"
                        [height]="26"
                      ></app-checkout-svg>
                      <app-checkin-svg
                        *ngIf="checkedProjecName"
                        [width]="26"
                        [height]="26"
                      ></app-checkin-svg>
                    </div>
                  </div>
                </div>
                <div>
                  <label for="">{{ "Projektnummer" | translate }}</label>
                  <div class="flexbox">
                    <div class="input-wrapp">
                      <input
                        type="text"
                        readonly
                        class="readonly-inputs"
                        formControlName="clientProjectNumber"
                      />
                    </div>
                    <div class="checkbox-wrapp">
                      <input
                        type="checkbox"
                        class="checkbox-type"
                        #checkProjectNumber
                        (click)="
                          showDataInTable(
                            checkedProjectNumber,
                            'checkProjectNumber'
                          )
                        "
                        [disabled]="
                          createForm.value.clientProjectNumber?.length < 1
                        "
                      />
                      <app-checkout-svg
                        *ngIf="!checkedProjectNumber"
                        [width]="26"
                        [height]="26"
                      ></app-checkout-svg>
                      <app-checkin-svg
                        *ngIf="checkedProjectNumber"
                        [width]="26"
                        [height]="26"
                      ></app-checkin-svg>
                    </div>
                  </div>
                </div>
              </div>
              <div class="ml-35">
                <div>
                  <label for=""> {{ "Resurskonto" | translate }}</label>
                  <div class="flexbox">
                    <div class="input-wrapp">
                      <input
                        type="text"
                        readonly
                        class="readonly-inputs"
                        formControlName="resursKonto1"
                      />
                    <!--  <input 
                        type="text"
                        readonly
                        class="readonly-inputs"
                        *ngIf="!getFinalResultForAtaBtn()"
                        > !-->
                    </div>
                    <div class="checkbox-wrapp">
                      <input
                        type="checkbox"
                        class="checkbox-type"
                        #checkResursconto
                        (click)="
                          showDataInTable(checkedProjectKonto, 'resursKonto1')
                        "
                        [disabled]="createForm.value.resursKonto1?.length < 1"
                      />
                      <app-checkout-svg
                        *ngIf="!checkedProjectKonto"
                        [width]="26"
                        [height]="26"
                      ></app-checkout-svg>
                      <app-checkin-svg
                        *ngIf="checkedProjectKonto"
                        [width]="26"
                        [height]="26"
                      ></app-checkin-svg>
                    </div>
                  </div>
                </div>
                <div>
                  <label for="">{{ "Märkningskrav" | translate }}</label>
                  <div class="flexbox">
                    <div class="input-wrapp-m">
                      <input type="text" 
                      value="{{markningskrav}}" 
                      (keyup)="setLabelingRequirement($event)"
                       />
                    </div>
                    <div class="checkbox-wrapp" *ngIf="visible_markningskrav_check">
                      <input 
                        type="checkbox" 
                        class="checkbox-type" 
                        [checked]="checkedMarkningskrav"
                        #checkMark 
                        (click)="
                        showDataInTable(checkedMarkningskrav, 'markningskrav')
                        "
                      />
                      <app-checkout-svg
                        *ngIf="!checkMark.checked"
                        [width]="26"
                        [height]="26"
                      ></app-checkout-svg>
                      <app-checkin-svg
                        *ngIf="checkMark.checked"
                        [width]="26"
                        [height]="26"
                      ></app-checkin-svg>
                    </div>
                    <div class="checkbox-wrapp" *ngIf="!visible_markningskrav_check">
                      <span class="warning">!</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="btns-border">
            <div class="btn-add-wrapper">

              <div
                class="inactive-invoice-btn"
                (click)="openAtaModal()"
                [ngClass]="{ 'active-invoice-btn': getFinalResultForAtaBtn() }"
              >
                <div *ngIf="!getFinalResultForAtaBtn()">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    width="18.385"
                    height="18.385"
                    viewBox="0 0 18.385 18.385"
                  >
                    <defs>
                      <clipPath id="clip-path">
                        <path
                          id="Path_736"
                          data-name="Path 736"
                          d="M0,6.951H13v-13H0Z"
                          transform="translate(0 6.049)"
                          fill="none"
                        />
                      </clipPath>
                    </defs>
                    <g
                      id="X_icon"
                      data-name="X icon"
                      transform="translate(9.192 0) rotate(45)"
                    >
                      <g
                        id="Group_291"
                        data-name="Group 291"
                        clip-path="url(#clip-path)"
                      >
                        <g
                          id="Group_289"
                          data-name="Group 289"
                          transform="translate(-0.001 0.002)"
                        >
                          <path
                            id="Path_734"
                            data-name="Path 734"
                            d="M6.951,3.475a6.5,6.5,0,1,1-6.5-6.5,6.5,6.5,0,0,1,6.5,6.5"
                            transform="translate(6.049 3.024)"
                            fill="#858585"
                          />
                        </g>
                        <g
                          id="Group_290"
                          data-name="Group 290"
                          transform="translate(2.691 2.702)"
                        >
                          <path
                            id="Path_735"
                            data-name="Path 735"
                            d="M3.968,3.444,1.3.781,3.972-1.892a.512.512,0,0,0,0-.75l-.191-.191a.511.511,0,0,0-.769.043L.372-.152-2.321-2.836a.521.521,0,0,0-.765.013l-.2.2a.521.521,0,0,0,.026.787L-.6.82S-3.176,3.412-3.264,3.5a.512.512,0,0,0,0,.75l.191.191A.511.511,0,0,0-2.308,4.4L.333,1.753,3.028,4.441A.521.521,0,0,0,3.8,4.428l.2-.2a.52.52,0,0,0-.028-.787"
                            transform="translate(3.453 2.997)"
                            fill="#fff"
                          />
                        </g>
                      </g>
                    </g>
                  </svg>
                </div>

                <!-- Ovo je onaj plavi -->

                <div *ngIf="getFinalResultForAtaBtn()">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    width="18.385"
                    height="18.385"
                    viewBox="0 0 18.385 18.385"
                  >
                    <defs>
                      <clipPath id="clip-path">
                        <path
                          id="Path_736"
                          data-name="Path 736"
                          d="M0,6.951H13v-13H0Z"
                          transform="translate(0 6.049)"
                          fill="none"
                        />
                      </clipPath>
                    </defs>
                    <g
                      id="X_icon"
                      data-name="X icon"
                      transform="translate(9.192) rotate(45)"
                    >
                      <g
                        id="Group_291"
                        data-name="Group 291"
                        clip-path="url(#clip-path)"
                      >
                        <g
                          id="Group_289"
                          data-name="Group 289"
                          transform="translate(-0.001 0.002)"
                        >
                          <path
                            id="Path_734"
                            data-name="Path 734"
                            d="M6.951,3.475a6.5,6.5,0,1,1-6.5-6.5,6.5,6.5,0,0,1,6.5,6.5"
                            transform="translate(6.049 3.024)"
                            fill="#82a7e2"
                          />
                        </g>
                        <g
                          id="Group_290"
                          data-name="Group 290"
                          transform="translate(2.691 2.702)"
                        >
                          <path
                            id="Path_735"
                            data-name="Path 735"
                            d="M3.968,3.444,1.3.781,3.972-1.892a.512.512,0,0,0,0-.75l-.191-.191a.511.511,0,0,0-.769.043L.372-.152-2.321-2.836a.521.521,0,0,0-.765.013l-.2.2a.521.521,0,0,0,.026.787L-.6.82S-3.176,3.412-3.264,3.5a.512.512,0,0,0,0,.75l.191.191A.511.511,0,0,0-2.308,4.4L.333,1.753,3.028,4.441A.521.521,0,0,0,3.8,4.428l.2-.2a.52.52,0,0,0-.028-.787"
                            transform="translate(3.453 2.997)"
                            fill="#fff"
                          />
                        </g>
                      </g>
                    </g>
                  </svg>
                </div>

                <div style="margin-top: 2px">{{ "ÄTA" | translate }}</div>
              </div>
              <div
                class="inactive-invoice-btn"
                (click)="openWeeklyReportModal()"
                [ngClass]="{
                  'active-invoice-btn': getFinalResultForWeeklyBtn()
                }"
              >
                <div *ngIf="!getFinalResultForWeeklyBtn()">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    width="18.385"
                    height="18.385"
                    viewBox="0 0 18.385 18.385"
                  >
                    <defs>
                      <clipPath id="clip-path">
                        <path
                          id="Path_736"
                          data-name="Path 736"
                          d="M0,6.951H13v-13H0Z"
                          transform="translate(0 6.049)"
                          fill="none"
                        />
                      </clipPath>
                    </defs>
                    <g
                      id="X_icon"
                      data-name="X icon"
                      transform="translate(9.192 0) rotate(45)"
                    >
                      <g
                        id="Group_291"
                        data-name="Group 291"
                        clip-path="url(#clip-path)"
                      >
                        <g
                          id="Group_289"
                          data-name="Group 289"
                          transform="translate(-0.001 0.002)"
                        >
                          <path
                            id="Path_734"
                            data-name="Path 734"
                            d="M6.951,3.475a6.5,6.5,0,1,1-6.5-6.5,6.5,6.5,0,0,1,6.5,6.5"
                            transform="translate(6.049 3.024)"
                            fill="#858585"
                          />
                        </g>
                        <g
                          id="Group_290"
                          data-name="Group 290"
                          transform="translate(2.691 2.702)"
                        >
                          <path
                            id="Path_735"
                            data-name="Path 735"
                            d="M3.968,3.444,1.3.781,3.972-1.892a.512.512,0,0,0,0-.75l-.191-.191a.511.511,0,0,0-.769.043L.372-.152-2.321-2.836a.521.521,0,0,0-.765.013l-.2.2a.521.521,0,0,0,.026.787L-.6.82S-3.176,3.412-3.264,3.5a.512.512,0,0,0,0,.75l.191.191A.511.511,0,0,0-2.308,4.4L.333,1.753,3.028,4.441A.521.521,0,0,0,3.8,4.428l.2-.2a.52.52,0,0,0-.028-.787"
                            transform="translate(3.453 2.997)"
                            fill="#fff"
                          />
                        </g>
                      </g>
                    </g>
                  </svg>
                </div>

                <div *ngIf="getFinalResultForWeeklyBtn()">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    width="18.385"
                    height="18.385"
                    viewBox="0 0 18.385 18.385"
                  >
                    <defs>
                      <clipPath id="clip-path">
                        <path
                          id="Path_736"
                          data-name="Path 736"
                          d="M0,6.951H13v-13H0Z"
                          transform="translate(0 6.049)"
                          fill="none"
                        />
                      </clipPath>
                    </defs>
                    <g
                      id="X_icon"
                      data-name="X icon"
                      transform="translate(9.192) rotate(45)"
                    >
                      <g
                        id="Group_291"
                        data-name="Group 291"
                        clip-path="url(#clip-path)"
                      >
                        <g
                          id="Group_289"
                          data-name="Group 289"
                          transform="translate(-0.001 0.002)"
                        >
                          <path
                            id="Path_734"
                            data-name="Path 734"
                            d="M6.951,3.475a6.5,6.5,0,1,1-6.5-6.5,6.5,6.5,0,0,1,6.5,6.5"
                            transform="translate(6.049 3.024)"
                            fill="#82a7e2"
                          />
                        </g>
                        <g
                          id="Group_290"
                          data-name="Group 290"
                          transform="translate(2.691 2.702)"
                        >
                          <path
                            id="Path_735"
                            data-name="Path 735"
                            d="M3.968,3.444,1.3.781,3.972-1.892a.512.512,0,0,0,0-.75l-.191-.191a.511.511,0,0,0-.769.043L.372-.152-2.321-2.836a.521.521,0,0,0-.765.013l-.2.2a.521.521,0,0,0,.026.787L-.6.82S-3.176,3.412-3.264,3.5a.512.512,0,0,0,0,.75l.191.191A.511.511,0,0,0-2.308,4.4L.333,1.753,3.028,4.441A.521.521,0,0,0,3.8,4.428l.2-.2a.52.52,0,0,0-.028-.787"
                            transform="translate(3.453 2.997)"
                            fill="#fff"
                          />
                        </g>
                      </g>
                    </g>
                  </svg>
                </div>
                <div style="margin-top: 2px">
                  {{ "Weekly Report" | translate }}
                </div>
              </div>


              <div
                class="inactive-invoice-btn"
                (click)="openPaymentPlanModal()"
                [ngClass]="{
                  'active-invoice-btn': getFinalResultForPaymentBtn()
                }"
              >
                <div *ngIf="!getFinalResultForPaymentBtn()">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    width="18.385"
                    height="18.385"
                    viewBox="0 0 18.385 18.385"
                  >
                    <defs>
                      <clipPath id="clip-path">
                        <path
                          id="Path_736"
                          data-name="Path 736"
                          d="M0,6.951H13v-13H0Z"
                          transform="translate(0 6.049)"
                          fill="none"
                        />
                      </clipPath>
                    </defs>
                    <g
                      id="X_icon"
                      data-name="X icon"
                      transform="translate(9.192 0) rotate(45)"
                    >
                      <g
                        id="Group_291"
                        data-name="Group 291"
                        clip-path="url(#clip-path)"
                      >
                        <g
                          id="Group_289"
                          data-name="Group 289"
                          transform="translate(-0.001 0.002)"
                        >
                          <path
                            id="Path_734"
                            data-name="Path 734"
                            d="M6.951,3.475a6.5,6.5,0,1,1-6.5-6.5,6.5,6.5,0,0,1,6.5,6.5"
                            transform="translate(6.049 3.024)"
                            fill="#858585"
                          />
                        </g>
                        <g
                          id="Group_290"
                          data-name="Group 290"
                          transform="translate(2.691 2.702)"
                        >
                          <path
                            id="Path_735"
                            data-name="Path 735"
                            d="M3.968,3.444,1.3.781,3.972-1.892a.512.512,0,0,0,0-.75l-.191-.191a.511.511,0,0,0-.769.043L.372-.152-2.321-2.836a.521.521,0,0,0-.765.013l-.2.2a.521.521,0,0,0,.026.787L-.6.82S-3.176,3.412-3.264,3.5a.512.512,0,0,0,0,.75l.191.191A.511.511,0,0,0-2.308,4.4L.333,1.753,3.028,4.441A.521.521,0,0,0,3.8,4.428l.2-.2a.52.52,0,0,0-.028-.787"
                            transform="translate(3.453 2.997)"
                            fill="#fff"
                          />
                        </g>
                      </g>
                    </g>
                  </svg>
                </div>

                <div *ngIf="getFinalResultForPaymentBtn()">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    width="18.385"
                    height="18.385"
                    viewBox="0 0 18.385 18.385"
                  >
                    <defs>
                      <clipPath id="clip-path">
                        <path
                          id="Path_736"
                          data-name="Path 736"
                          d="M0,6.951H13v-13H0Z"
                          transform="translate(0 6.049)"
                          fill="none"
                        />
                      </clipPath>
                    </defs>
                    <g
                      id="X_icon"
                      data-name="X icon"
                      transform="translate(9.192) rotate(45)"
                    >
                      <g
                        id="Group_291"
                        data-name="Group 291"
                        clip-path="url(#clip-path)"
                      >
                        <g
                          id="Group_289"
                          data-name="Group 289"
                          transform="translate(-0.001 0.002)"
                        >
                          <path
                            id="Path_734"
                            data-name="Path 734"
                            d="M6.951,3.475a6.5,6.5,0,1,1-6.5-6.5,6.5,6.5,0,0,1,6.5,6.5"
                            transform="translate(6.049 3.024)"
                            fill="#82a7e2"
                          />
                        </g>
                        <g
                          id="Group_290"
                          data-name="Group 290"
                          transform="translate(2.691 2.702)"
                        >
                          <path
                            id="Path_735"
                            data-name="Path 735"
                            d="M3.968,3.444,1.3.781,3.972-1.892a.512.512,0,0,0,0-.75l-.191-.191a.511.511,0,0,0-.769.043L.372-.152-2.321-2.836a.521.521,0,0,0-.765.013l-.2.2a.521.521,0,0,0,.026.787L-.6.82S-3.176,3.412-3.264,3.5a.512.512,0,0,0,0,.75l.191.191A.511.511,0,0,0-2.308,4.4L.333,1.753,3.028,4.441A.521.521,0,0,0,3.8,4.428l.2-.2a.52.52,0,0,0-.028-.787"
                            transform="translate(3.453 2.997)"
                            fill="#fff"
                          />
                        </g>
                      </g>
                    </g>
                  </svg>
                </div>
                <div style="margin-top: 2px">
                  {{ "Payment plan" | translate }}
                </div>
              </div>
            </div>

          </div>
          <div class="table-border">
            <table>
              <thead>
                <tr>
                  <th class="Description-w">{{ "Description" | translate }}</th>
                  <th class="Quantity-w">{{ "Quantity" | translate }}</th>
                  <th class="Unit-w">{{ "Unit" | translate }}</th>
                  <th class="Price-w">{{ "Price per unit" | translate }}</th>
                  <th class="percent-w">
                    <svg
                      id="Component_182_76"
                      data-name="Component 182 – 76"
                      xmlns="http://www.w3.org/2000/svg"
                      xmlns:xlink="http://www.w3.org/1999/xlink"
                      width="17.275"
                      height="10.458"
                      viewBox="0 0 17.275 10.458"
                    >
                      <defs>
                        <clipPath id="clip-path">
                          <rect
                            id="Rectangle_15721"
                            data-name="Rectangle 15721"
                            width="17.275"
                            height="10.458"
                            fill="#fff"
                          />
                        </clipPath>
                      </defs>
                      <g
                        id="Group_4226"
                        data-name="Group 4226"
                        clip-path="url(#clip-path)"
                      >
                        <path
                          id="Path_1791"
                          data-name="Path 1791"
                          d="M47.312,6.918a.379.379,0,0,1-.1-.262V4.788H45.5a.3.3,0,0,1-.235-.106.377.377,0,0,1-.1-.262V4.094a.376.376,0,0,1,.1-.262.3.3,0,0,1,.235-.106h1.715V1.858a.379.379,0,0,1,.1-.262.3.3,0,0,1,.235-.106h.368a.3.3,0,0,1,.235.106.378.378,0,0,1,.1.262V3.726h1.7a.3.3,0,0,1,.235.106.377.377,0,0,1,.1.262V4.42a.378.378,0,0,1-.1.262.3.3,0,0,1-.235.106h-1.7V6.656a.377.377,0,0,1-.1.262.3.3,0,0,1-.235.106h-.368a.3.3,0,0,1-.235-.106"
                          transform="translate(-33.004 -1.089)"
                          fill="#fff"
                        />
                        <path
                          id="Path_1792"
                          data-name="Path 1792"
                          d="M47.129,29.891a.377.377,0,0,1-.1-.262V29.3a.378.378,0,0,1,.1-.262.3.3,0,0,1,.235-.106h3.469a.3.3,0,0,1,.235.106.378.378,0,0,1,.1.262v.326a.377.377,0,0,1-.1.262.3.3,0,0,1-.235.106H47.364a.3.3,0,0,1-.235-.106"
                          transform="translate(-34.365 -21.142)"
                          fill="#fff"
                        />
                        <path
                          id="Path_1793"
                          data-name="Path 1793"
                          d="M4.112,4.752a2.2,2.2,0,0,1-1.723.731,2.323,2.323,0,0,1-.978-.2A2.246,2.246,0,0,1,.66,4.729a2.47,2.47,0,0,1-.489-.866A3.527,3.527,0,0,1,0,2.734,2.908,2.908,0,0,1,.652.739,2.185,2.185,0,0,1,2.374,0a2.342,2.342,0,0,1,.97.2A2.226,2.226,0,0,1,4.1.755a2.458,2.458,0,0,1,.489.874,3.607,3.607,0,0,1,.171,1.136,2.877,2.877,0,0,1-.652,1.987m-2.568-.66a.96.96,0,0,0,.846.389q1.1,0,1.1-1.653A2.69,2.69,0,0,0,3.22,1.391.959.959,0,0,0,2.374,1a.926.926,0,0,0-.838.405A2.366,2.366,0,0,0,1.272,2.67a2.649,2.649,0,0,0,.272,1.422m.683,6.08a.212.212,0,0,1,.008-.238L7.79.525A.706.706,0,0,1,8.046.27.682.682,0,0,1,8.4.175h.388a.232.232,0,0,1,.21.111.212.212,0,0,1-.008.239L3.43,9.934a.7.7,0,0,1-.256.254.679.679,0,0,1-.349.1H2.436a.232.232,0,0,1-.21-.111m8.341-.445a2.195,2.195,0,0,1-1.722.731,2.325,2.325,0,0,1-.978-.2A2.248,2.248,0,0,1,7.115,9.7a2.464,2.464,0,0,1-.489-.866,3.528,3.528,0,0,1-.171-1.129,2.908,2.908,0,0,1,.652-1.995A2.184,2.184,0,0,1,8.83,4.975a2.338,2.338,0,0,1,.97.2,2.225,2.225,0,0,1,.76.556,2.454,2.454,0,0,1,.489.874,3.608,3.608,0,0,1,.171,1.136,2.877,2.877,0,0,1-.652,1.987M8,9.068a.96.96,0,0,0,.846.389q1.1,0,1.1-1.653a2.691,2.691,0,0,0-.272-1.438.96.96,0,0,0-.846-.39.927.927,0,0,0-.838.405,2.368,2.368,0,0,0-.264,1.264A2.651,2.651,0,0,0,8,9.068"
                          transform="translate(0 0)"
                          fill="#fff"
                        />
                      </g>
                    </svg>
                  </th>
                  <th class="Total-w">{{ "Total" | translate }}</th>
                  <th class="Account-w">{{ "Account" | translate }}</th>
                  <th class="dell-w">
                    <svg
                      id="Group_4156"
                      data-name="Group 4156"
                      xmlns="http://www.w3.org/2000/svg"
                      width="10.742"
                      height="15.696"
                      viewBox="0 0 10.742 15.696"
                    >
                      <path
                        id="Path_800"
                        data-name="Path 800"
                        d="M32.707,16.306a.275.275,0,0,0-.279-.27h-2.9V15.39a.275.275,0,0,0-.279-.271h-3.8a.275.275,0,0,0-.279.271v.646H22.252a.275.275,0,0,0-.279.27v.8H32.707Z"
                        transform="translate(-21.973 -15.119)"
                        fill="#fcf4ec"
                      />
                      <path
                        id="Path_801"
                        data-name="Path 801"
                        d="M21.973,23.209,23.286,35.9c.033.187.125.283.279.283h7.557c.154,0,.246-.1.279-.283l1.313-12.693Zm2.465,12.053-.909-9.55h1.212l.486,9.55Zm3.491,0H26.656l-.179-9.55h1.607Zm2.216,0h-.789l.486-9.55h1.212Z"
                        transform="translate(-21.973 -20.489)"
                        fill="#fcf4ec"
                      />
                    </svg>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let job of checkedArr; let i = index">
                  <td class="description-left-align">
                    {{ job.ProjectNumber }}
                  </td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td class="trash-align" (click)="onRemoveCheckedArr(job)">
                    <svg
                      id="Group_4157"
                      data-name="Group 4157"
                      xmlns="http://www.w3.org/2000/svg"
                      width="10.742"
                      height="15.696"
                      viewBox="0 0 10.742 15.696"
                    >
                      <path
                        id="Path_800"
                        data-name="Path 800"
                        d="M32.707,16.306a.275.275,0,0,0-.279-.27h-2.9V15.39a.275.275,0,0,0-.279-.271h-3.8a.275.275,0,0,0-.279.271v.646H22.252a.275.275,0,0,0-.279.27v.8H32.707Z"
                        transform="translate(-21.973 -15.119)"
                        fill="#373b40"
                      />
                      <path
                        id="Path_801"
                        data-name="Path 801"
                        d="M21.973,23.209,23.286,35.9c.033.187.125.283.279.283h7.557c.154,0,.246-.1.279-.283l1.313-12.693Zm2.465,12.053-.909-9.55h1.212l.486,9.55Zm3.491,0H26.656l-.179-9.55h1.607Zm2.216,0h-.789l.486-9.55h1.212Z"
                        transform="translate(-21.973 -20.489)"
                        fill="#373b40"
                      />
                    </svg>
                  </td>
                </tr>

                <tr *ngIf="checkedArr.length > 0">
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                </tr>

                <ng-container *ngIf="paymentPlanArray.length == 0">
                  <tr
                    formArrayName="articleForm"
                    *ngFor="let job of renderDataInTable; let i = index"
                  >
                    <td class="description-left-align">
                      <input
                        (keyup)="setValue($event, job, 'Description')" 
                        type="text"
                        class="input-in-table-align-start"
                        value="{{ job.description }}"
                        [disabled]="!job.emptyRow ? true : null"
                      />
                    </td>
                    <td>

                      <input
                        type="text"
                        number-format-directive
                        (input)="sendTheNewValue($event, job, 'quantity')"
                        class="input-in-table-align-end"
                        value="{{ job.quantity }}"
                        [disabled]="!job.emptyRow ? true : null"
                      />
                    </td>
                    <td>
                      <div class="unit-dropdown">
                          <select
                            class="form-control form-control-sm width5em"
                            style="width: 110px"
                            #articleUnit1
                            (change)="setUnit(job, articleUnit1.value, i)"
                          >
                            <option value=""></option>
                            <option *ngFor="let unit of units" [selected]="unit == job.Unit" value="{{ unit }}">
                              {{ unit | translate }}
                            </option>
                          </select>
                      </div>
                    </td>
                    <td>
                      <input
                        number-format-directive
                        type="text"
                        value="{{ job.pricePerUnit }}"
                        (input)="sendTheNewValue($event, job, 'pricePerUnit')"
                        class="input-in-table-align-end"
                        [disabled]="!job.emptyRow ? true : null"
                      />
                    </td>
                    <td>
                      <input
                        number-format-directive
                        type="text"
                        value="{{ job.deduct }}"
                        (input)="sendTheNewValue($event, job, 'deduct')"
                        class="input-in-table-align-end"
                        [disabled]="!job.emptyRow ? true : null"
                      />
                    </td>
                    <td>
                      <input
                        number-format-directive
                        type="text"
                        value="{{ job.total | number:'1.2-2': 'fr-FR' }}"
                        class="input-in-table-align-end"
                        disabled
                      />
                    </td>
                    <td class="td-wrapper">
                      <div class="input-wrapper1">
                        <app-simple-select-in-table
                          [ClientItem]= "enabledAccounts"
                          [fontSize]="14"
                          [data]="job.Account"
                          [width]="90"
                          [type1]="'Account'"
                          [AccountActive]="true"
                          (Account)="setAccount($event, job)"
                        >
                        </app-simple-select-in-table>
                      </div>
                    </td>
                    <td class="trash-align" (click)="onRemoveRow(job, i)">
                      <svg
                        id="Group_4157"
                        data-name="Group 4157"
                        xmlns="http://www.w3.org/2000/svg"
                        width="10.742"
                        height="15.696"
                        viewBox="0 0 10.742 15.696"
                      >
                        <path
                          id="Path_800"
                          data-name="Path 800"
                          d="M32.707,16.306a.275.275,0,0,0-.279-.27h-2.9V15.39a.275.275,0,0,0-.279-.271h-3.8a.275.275,0,0,0-.279.271v.646H22.252a.275.275,0,0,0-.279.27v.8H32.707Z"
                          transform="translate(-21.973 -15.119)"
                          fill="#373b40"
                        />
                        <path
                          id="Path_801"
                          data-name="Path 801"
                          d="M21.973,23.209,23.286,35.9c.033.187.125.283.279.283h7.557c.154,0,.246-.1.279-.283l1.313-12.693Zm2.465,12.053-.909-9.55h1.212l.486,9.55Zm3.491,0H26.656l-.179-9.55h1.607Zm2.216,0h-.789l.486-9.55h1.212Z"
                          transform="translate(-21.973 -20.489)"
                          fill="#373b40"
                        />
                      </svg>
                    </td>
                  </tr>
                </ng-container>

                <ng-container *ngIf="paymentPlanArray.length > 0">
                  <ng-container *ngFor="let job of renderDataInTable; let i = index">
                    <ng-container *ngIf="all_invoiced_total_of_final_invoices">
                      <tr formArrayName="articleForm">
                        <td class="description-left-align">
                          <input
                            (keyup)="updatePaymentRowForFinalResult($event, job, 'Description')" 
                            type="text"
                            class="input-in-table-align-start"
                            value="{{ job.Description | translate}}"
                            [disabled]="!job.emptyRow ? true : null"
                          />
                        </td>
                        <td>
                          <input
                            type="text"
                            number-format-directive
                            class="input-in-table-align-end"
                            value="{{ job.quantity }}"
                            (input)="
                              updatePaymentRowForFinalResult($event, job, 'quantity')
                            "
                          />
                        </td>
                        <td>
                          <div class="unit-dropdown">
                              <select
                                class="form-control form-control-sm width5em"
                                style="width: 110px"
                                #articleUnit1
                                (change)="setUnit(job, articleUnit1.value, i)"
                              >
                                <option value=""></option>
                                <option *ngFor="let unit of units" [selected]="unit == job.Unit" value="{{ unit }}">
                                  {{ unit | translate }}
                                </option>
                              </select>
                          </div>
                        </td>
                        <td>
                          <input
                            number-format-directive
                            type="text"
                            value="{{ job.Price }}"
                            class="input-in-table-align-end"
                            (input)="
                              updatePaymentRowForFinalResult($event, job, 'Price')
                            "                          />
                        </td>
                        <td>
                          <input
                            number-format-directive
                            type="text"
                            value="{{ job.Deduct }}"
                            class="input-in-table-align-end"
                            (input)="
                              updatePaymentRowForFinalResult($event, job, 'Deduct')
                            "
                          />
                        </td>
                        <td>   
                          <input 
                            type="text"
                            class="input-in-table-align-end"
                            value="{{ job.total | number:'1.2-2': 'fr-FR' }}"
                          >
                        </td>
                        <td class="td-wrapper">
                          <div class="input-wrapper1">
                            <app-simple-select-in-table
                              [ClientItem]= "enabledAccounts"
                              [fontSize]="14"
                              [data]="job.Account"
                              [width]="90"
                              [type1]="'Account'"
                              [AccountActive]="true"
                              (Account)="setAccount($event, job)"
                            >
                            </app-simple-select-in-table>
                          </div>
                        </td>
                        <td class="trash-align">
                          <ng-container *ngIf="job.description != 'Final invoice'">
                            <svg
                              (click)="onRemoveRow(job, i)"
                              id="Group_4157"
                              data-name="Group 4157"
                              xmlns="http://www.w3.org/2000/svg"
                              width="10.742"
                              height="15.696"
                              viewBox="0 0 10.742 15.696"
                            >
                              <path
                                id="Path_800"
                                data-name="Path 800"
                                d="M32.707,16.306a.275.275,0,0,0-.279-.27h-2.9V15.39a.275.275,0,0,0-.279-.271h-3.8a.275.275,0,0,0-.279.271v.646H22.252a.275.275,0,0,0-.279.27v.8H32.707Z"
                                transform="translate(-21.973 -15.119)"
                                fill="#373b40"
                              />
                              <path
                                id="Path_801"
                                data-name="Path 801"
                                d="M21.973,23.209,23.286,35.9c.033.187.125.283.279.283h7.557c.154,0,.246-.1.279-.283l1.313-12.693Zm2.465,12.053-.909-9.55h1.212l.486,9.55Zm3.491,0H26.656l-.179-9.55h1.607Zm2.216,0h-.789l.486-9.55h1.212Z"
                                transform="translate(-21.973 -20.489)"
                                fill="#373b40"
                              />
                            </svg>
                          </ng-container>
                        </td>
                      </tr>
                    </ng-container>
                    <ng-container *ngIf="!all_invoiced_total_of_final_invoices">
                      <tr>
                        <td class="description-left-align">
                          {{ job.description | translate}}
                        </td>
                        <td></td>
                        <td>
                          <div class="unit-dropdown">
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              xmlns:xlink="http://www.w3.org/1999/xlink"
                              width="9.273"
                              height="6"
                              viewBox="0 0 9.273 6"
                            >
                              <defs>
                                <clipPath id="clip-path">
                                  <path
                                    id="Path_758"
                                    data-name="Path 758"
                                    d="M0-1.726H9.273v-6H0Z"
                                    transform="translate(0 7.726)"
                                    fill="none"
                                  />
                                </clipPath>
                              </defs>
                              <g
                                id="Group_305"
                                data-name="Group 305"
                                clip-path="url(#clip-path)"
                              >
                                <g
                                  id="Group_304"
                                  data-name="Group 304"
                                  transform="translate(0 0)"
                                >
                                  <path
                                    id="Path_757"
                                    data-name="Path 757"
                                    d="M-.03-.258l4.1,4.916a.491.491,0,0,0,.419.186h.047a.491.491,0,0,0,.419-.186L9.032-.258a.568.568,0,0,0,.1-.373.393.393,0,0,0-.2-.326L8.8-1.05a.663.663,0,0,0-.4-.1.456.456,0,0,0-.349.2L4.513,3.236.971-.957a.456.456,0,0,0-.349-.2.663.663,0,0,0-.4.1L.063-.957a.393.393,0,0,0-.2.326.568.568,0,0,0,.1.373"
                                    transform="translate(0.136 1.156)"
                                    fill="#858585"
                                  />
                                </g>
                              </g>
                            </svg>
                          </div>
                        </td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td class="trash-align" (click)="onRemoveRowPayment(job, i)">
                          <svg
                            id="Group_4157"
                            data-name="Group 4157"
                            xmlns="http://www.w3.org/2000/svg"
                            width="10.742"
                            height="15.696"
                            viewBox="0 0 10.742 15.696"
                          >
                            <path
                              id="Path_800"
                              data-name="Path 800"
                              d="M32.707,16.306a.275.275,0,0,0-.279-.27h-2.9V15.39a.275.275,0,0,0-.279-.271h-3.8a.275.275,0,0,0-.279.271v.646H22.252a.275.275,0,0,0-.279.27v.8H32.707Z"
                              transform="translate(-21.973 -15.119)"
                              fill="#373b40"
                            />
                            <path
                              id="Path_801"
                              data-name="Path 801"
                              d="M21.973,23.209,23.286,35.9c.033.187.125.283.279.283h7.557c.154,0,.246-.1.279-.283l1.313-12.693Zm2.465,12.053-.909-9.55h1.212l.486,9.55Zm3.491,0H26.656l-.179-9.55h1.607Zm2.216,0h-.789l.486-9.55h1.212Z"
                              transform="translate(-21.973 -20.489)"
                              fill="#373b40"
                            />
                          </svg>
                        </td>
                      </tr>

                      <tr *ngFor="let articleItem of job.loopThroughArticles">
                        <td class="description-left-align">
                          {{ articleItem.Name | translate }}
                        </td>
                        <td>
                          <input
                            type="text"
                            number-format-directive
                            class="input-in-table-align-end"
                            value="{{ articleItem.quantity }}"
                            (input)="
                              updatePaymentRow($event, articleItem, 'quantity')
                            "
                            readonly
                          />
                        </td>
                        <td>
                          <div class="unit-dropdown" *ngIf="!getFinalResultForPaymentBtn()">
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              xmlns:xlink="http://www.w3.org/1999/xlink"
                              width="9.273"
                              height="6"
                              viewBox="0 0 9.273 6"
                            >
                              <defs>
                                <clipPath id="clip-path">
                                  <path
                                    id="Path_758"
                                    data-name="Path 758"
                                    d="M0-1.726H9.273v-6H0Z"
                                    transform="translate(0 7.726)"
                                    fill="none"
                                  />
                                </clipPath>
                              </defs>
                              <g
                                id="Group_305"
                                data-name="Group 305"
                                clip-path="url(#clip-path)"
                              >
                                <g
                                  id="Group_304"
                                  data-name="Group 304"
                                  transform="translate(0 0)"
                                >
                                  <path
                                    id="Path_757"
                                    data-name="Path 757"
                                    d="M-.03-.258l4.1,4.916a.491.491,0,0,0,.419.186h.047a.491.491,0,0,0,.419-.186L9.032-.258a.568.568,0,0,0,.1-.373.393.393,0,0,0-.2-.326L8.8-1.05a.663.663,0,0,0-.4-.1.456.456,0,0,0-.349.2L4.513,3.236.971-.957a.456.456,0,0,0-.349-.2.663.663,0,0,0-.4.1L.063-.957a.393.393,0,0,0-.2.326.568.568,0,0,0,.1.373"
                                    transform="translate(0.136 1.156)"
                                    fill="#858585"
                                  />
                                </g>
                              </g>
                            </svg>
                          </div>
                          <div class="unit-dropdown" *ngIf="getFinalResultForPaymentBtn()">
                              <svg
                                xmlns="http://www.w3.org/2000/svg"
                                xmlns:xlink="http://www.w3.org/1999/xlink"
                                width="9.273"
                                height="6"
                                viewBox="0 0 9.273 6"
                              >
                                <defs>
                                  <clipPath id="clip-path">
                                    <path
                                      id="Path_758"
                                      data-name="Path 758"
                                      d="M0-1.726H9.273v-6H0Z"
                                      transform="translate(0 7.726)"
                                      fill="none"
                                    />
                                  </clipPath>
                                </defs>
                                <g
                                  id="Group_305"
                                  data-name="Group 305"
                                  clip-path="url(#clip-path)"
                                >
                                  <g
                                    id="Group_304"
                                    data-name="Group 304"
                                    transform="translate(0 0)"
                                  >
                                    <path
                                      id="Path_757"
                                      data-name="Path 757"
                                      d="M-.03-.258l4.1,4.916a.491.491,0,0,0,.419.186h.047a.491.491,0,0,0,.419-.186L9.032-.258a.568.568,0,0,0,.1-.373.393.393,0,0,0-.2-.326L8.8-1.05a.663.663,0,0,0-.4-.1.456.456,0,0,0-.349.2L4.513,3.236.971-.957a.456.456,0,0,0-.349-.2.663.663,0,0,0-.4.1L.063-.957a.393.393,0,0,0-.2.326.568.568,0,0,0,.1.373"
                                      transform="translate(0.136 1.156)"
                                      fill="#858585"
                                    />
                                  </g>
                                </g>
                              </svg>
                            </div>
                        </td>
                        <td>
                          <input
                            number-format-directive
                            type="text"
                            value="{{ articleItem.Amount }}"
                            class="input-in-table-align-end"
                            (input)="
                              updatePaymentRow($event, articleItem, 'Amount')
                            "
                            readonly
                          />
                        </td>
                        <td>
                          <input
                            number-format-directive
                            type="text"
                            value="{{ articleItem.deduct }}"
                            class="input-in-table-align-end"
                            (input)="
                              updatePaymentRow($event, articleItem, 'deduct')
                            "
                            readonly
                          />
                        </td>
                        <td>   
                          <input 
                            type="text"
                            class="input-in-table-align-end"
                            value="{{ articleItem.total | number:'1.2-2': 'fr-FR' }}"
                            disabled
                          >
                        </td>
                        <td></td>
                        <td></td>
                      </tr>

                      <tr *ngIf="job.sumOfArrears?.toFixed(2) != 0">
                        <td class="description-left-align">
                          {{
                            "Innestående medel som debiteras efter besiktning"
                              | translate
                          }}
                        </td>
                        <td></td>
                        <td></td>
                        <td>
                          <input
                            number-format-directive
                            type="text"
                            value="{{ job.sumOfArrears?.toFixed(2) }}"
                            class="input-in-table-align-end"
                            disabled
                          />
                        </td>
                        <td></td>
                        <td>
                          <input
                            number-format-directive
                            type="text"
                            value="{{ job.sumOfArrears?.toFixed(2) }}"
                            class="input-in-table-align-end"
                            disabled
                          />
                        </td>
                        <td></td>
                        <td></td>
                      </tr>
                    </ng-container>
                  </ng-container>
                </ng-container>
                <ng-container *ngIf="!all_invoiced_total_of_final_invoices">
                  <tr *ngIf="renderDataInTable.length > 0 && paymentPlanArray.length > 0">
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                  </tr>

                  <tr *ngIf="paymentPlanArray.length > 0 && renderDataInTable.length > 0">
                    <td class="description-left-align">
                      {{ "Totalt innehållna medel i projektet" | translate }}:
                      {{ ConvertToAbsoluteVal(sumOfInvoiced) }} {{currency}}
                    </td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                  </tr>

                  <tr style="height: 27px !important">
                    <td
                      colspan="4"
                      class="black-color"
                      style="height: 27px !important"
                    >
                      {{ "Total sum" | translate }}
                    </td>
                    <td colspan="4" class="total-nw">
                      <input
                        type="text"
                        number-format-directive
                        class="input-in-table-align-end"
                        disabled
                        value="{{ totalSum | number:'1.2-2': 'fr-FR' }}"
                      />
                    </td>
                  </tr>
                </ng-container>
              </tbody>
            </table>
          </div>
          <div class="btns-border-bottom">
            <div class="btn-send-wrapper">
              <button
                class="spara-btn cursor-pointer"
                [ngClass]="whenSaveBtnIsActive() ? 'active-invoice-btn' : 'inactive-invoice-btn'"
                type="submit"
                [disabled]="allowSave() ? '' : true"
              >
                <div style="margin-top: 1px">
                  {{ "Save" | translate }}
                </div>
              </button>
              <button
                class="inactive-invoice-btn cursor-pointer"
                [ngStyle]="{ 'border-color': sendEconomy }"
              >
                <div style="margin-top: 1px" [ngStyle]="{ color: sendEconomy }">
                  {{ "Send To Economy" | translate }}
                </div>
                <div style="margin-top: -2px">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="21.073"
                    height="21.99"
                    viewBox="0 0 21.073 21.99"
                  >
                    <path
                      id="send"
                      d="M15.71,0,0,9.524l5.134,2.2,7.673-7.943L7.029,12.53l0,0-.006,0,.1,4.84,2.774-3.61,3.647,1.56Z"
                      transform="matrix(0.927, 0.375, -0.375, 0.927, 6.507, 0)"
                      [style.fill]="sendEconomy"
                    />
                  </svg>
                </div>
              </button>
              <div class="flexbox billed">
                <div>
                  {{ "Billed" | translate }}
                </div>
                <div>
                  <div class="checkbox-wrapp-billed">
                    <input type="checkbox" class="checkbox-type" #checkBilled [disabled]="true"/>
                    <app-checkout-svg
                      *ngIf="!checkBilled.checked"
                      [width]="20"
                      [height]="20"
                    ></app-checkout-svg>
                    <app-checkin-svg
                      *ngIf="checkBilled.checked"
                      [width]="20"
                      [height]="20"
                    ></app-checkin-svg>
                  </div>
                </div>
              </div>
              <button
                class="inactive-invoice-btn cursor-pointer"
                [ngStyle]="{ 'border-color': dellete }"
              >
                <div style="margin-top: -2px">
                  <svg
                    id="Group_8075"
                    data-name="Group 8075"
                    xmlns="http://www.w3.org/2000/svg"
                    width="10.742"
                    height="15.696"
                    viewBox="0 0 10.742 15.696"
                  >
                    <path
                      id="Path_800"
                      data-name="Path 800"
                      d="M32.707,16.306a.275.275,0,0,0-.279-.27h-2.9V15.39a.275.275,0,0,0-.279-.271h-3.8a.275.275,0,0,0-.279.271v.646H22.252a.275.275,0,0,0-.279.27v.8H32.707Z"
                      transform="translate(-21.973 -15.119)"
                      [style.fill]="dellete"
                    />
                    <path
                      id="Path_801"
                      data-name="Path 801"
                      d="M21.973,23.209,23.286,35.9c.033.187.125.283.279.283h7.557c.154,0,.246-.1.279-.283l1.313-12.693Zm2.465,12.053-.909-9.55h1.212l.486,9.55Zm3.491,0H26.656l-.179-9.55h1.607Zm2.216,0h-.789l.486-9.55h1.212Z"
                      transform="translate(-21.973 -20.489)"
                      [style.fill]="dellete"
                    />
                  </svg>
                </div>
                <div style="margin-top: 1px" [ngStyle]="{ color: dellete }">
                  {{ "Delete" | translate }}
                </div>
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
    <div class="vertical-line"></div>
    <div class="horizontal-line"></div>
  </div>
</div>

<div class="spinner-wrapper" *ngIf="loadingSpinner">
  <mat-spinner [diameter]="100"></mat-spinner>
</div>
